<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>下拉遮罩</title>
<style>
body,div,ul,li,a,span{margin: 0;padding: 0;font-family: "Microsoft Yahei";}
ul{list-style: none;}
a{color: #999;text-decoration: none;}
.clearfix:after{content: "";display: block;clear: both;}
.clearfix{zoom:1;}
.m-wrap{width: 880px;height: 520px;margin: 50px auto;}
#mHead{height: 37px;}
#mHead li:first-child{border-left: 1px solid #C81623;}
#mHead li:last-child{border-right: 1px solid #C81623;}
#mHead li{float: left;border-bottom: 1px solid #C81623;border-top: 1px solid #C81623;}
#mHead a{display: inline-block; height: 16px; line-height: 16px; font-size: 14px; padding: 9px 16px;}
#mHead span{height: 16px;width: 0;border-right: 1px solid #C81623;margin-right: -1px;}

.mBody{height: 480px;width: 888px;display: none;}
.mBody li{width: 220px;height: 240px;float: left;border:1px solid #ddd;position: relative;overflow: hidden;}
.p-img a{display: block; width: 130px;height: 130px;margin:20px auto; overflow: hidden;}
.p-name{width: 180px;height: 40px; padding: 0 20px;}
.p-name a{font-size: 12px;}
.p-price {width: 180px;padding: 2px 20px; text-align: left; color: #E4393C;}
.p-name a:hover{color: #C81623;}
.mask{width: 220px;height: 240px;position: absolute;left:0; top: -240px; background-color: rgba(0,0,0,.5);}
.mask a{display: inline-block;height: 30px;line-height: 30px;margin: 19px;margin-top: 190px;padding: 2px 5px; border-radius: 3px; background-color: #FF7A01; font-size: 15px; color: #fff;text-align: center;}
.mask a:hover{background-color: #FF5200;}
</style>

</head>
<body>
<div class="m-wrap">
	<div id="mHead">
		<ul class="clearfix">
			<li><a href="#">热门</a><span></span></li>
			<li><a href="#">新品</a><span></span></li>
			<li><a href="#">性价比</a><span></span></li>
			<li><a href="#">运营商</a><span></span></li>
			<li><a href="#">JDPhone</a><span></span></li>
			<li><a href="#">手机配件</a></li>
		</ul>
	</div>
	<div id="p-body-wrap">
	<div class="mBody" style="display: block;">
		<ul class="clearfix">
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="1.jpg"></a></div>
				<div class="p-name"><a href="#">锤子（smartisan）T2 黑色 16GB 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>2199<span>.00</span></div>
			</li>
		</ul>
	</div>
	<div class="mBody">
		<ul class="clearfix">
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="2.jpg"></a></div>
				<div class="p-name"><a href="#">魅族 MX5 16GB 灰色 移动联通双4G手机 双卡双待</a></div>
				<div class="p-price"><span>￥</span>1499<span>.00</span></div>
			</li>
		</ul>
	</div>
	<div class="mBody">
		<ul class="clearfix">
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="3.jpg"></a></div>
				<div class="p-name"><a href="#">奇酷（QiKU） 青春版 移动联通4G手机 智铂银 双卡双待</a></div>
				<div class="p-price"><span>￥</span>999<span>.00</span></div>
			</li>
		</ul>
	</div>
	<div class="mBody">
		<ul class="clearfix">
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="4.jpg"></a></div>
				<div class="p-name"><a href="#">【电信赠费版】Apple iPhone 6s 16G 金色 移动联通电信4G手机</a></div>
				<div class="p-price"><span>￥</span>6399<span>.00</span></div>
			</li>
		</ul>
	</div>
	<div class="mBody">
		<ul class="clearfix">
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="5.jpg"></a></div>
				<div class="p-name"><a href="#">荣耀 6 Plus 3GB+16GB内存版 白色 移动4G手</a></div>
				<div class="p-price"><span>￥</span>1399<span>.00</span></div>
			</li>
		</ul>
	</div>
	<div class="mBody">
		<ul class="clearfix">
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
			<li>
				<div class="mask"><a href="#">去看看</a><a href="#">加入购物车</a></div>
				<div class="p-img"><a href="#"><img src="6.jpg"></a></div>
				<div class="p-name"><a href="#">JS/几素 Milk 牛奶瓶充电宝10000毫安 可爱卡通情侣小巧迷你</a></div>
				<div class="p-price"><span>￥</span>99<span>.00</span></div>
			</li>
		</ul>
	</div>
	</div>
</div>
<script>
window.onload = function () {
	var mHead = document.getElementById('mHead');
	var mBodyWrap = document.getElementById('p-body-wrap');
	var tabItems = mHead.getElementsByTagName('li');
	var tabBodies = getElementsByClassName(document,'mBody');
	var mBodyItems = mBodyWrap.getElementsByTagName('li');

	for (var i = 0; i < tabItems.length; i++) {
		tabItems[i].index = i;
		tabItems[i].onmouseover = function() {
			for (var i = 0; i < tabItems.length; i++) {
				tabItems[i].style.borderBottom = '1px solid #C81623';
				tabItems[i].style.borderTop = '1px solid #C81623';
				if (i!=0) {tabItems[i].style.borderLeft = 'none';}
				if(i!=tabItems.length-1) {tabItems[i].style.borderRight = 'none';}
			}
			this.style.borderBottom = 'none';
			this.style.borderTop = '3px solid #C81623';
			this.style.borderRight = '1px solid #C81623';
			this.style.borderLeft = '1px solid #C81623';
			for (var i = 0; i < tabBodies.length; i++) {
				tabBodies[i].style.display = 'none';
			}
			tabBodies[this.index].style.display = 'block';
		};
	}

	for (var i = 0; i < mBodyItems.length; i++) {
		mBodyItems[i].index = i;
		mBodyItems[i].onmouseover = function () {
			var mask = getElementsByClassName(this,'mask')[0];//需要的时候再获取mask，性能优化一点
			/*不想要太常见的下拉然后回到原位置的效果，项做出这样的效果，就添加了一个自定义属性
			this.isTopNagtive。通过这个属性来间接控制onmouseout事件时mask移动到的位置，
			每次当onmouseover时记录下mask当时的offsetTop值的正负，如果是正的，表明onmouseover之前是在下方的，那么
				将this.isTopNagtive置为-1;
			onmouseout时就让他移动到的位置的值是负的就可以了，即移动到
				-1 * 父元素的高度，就移动到上面去了，如果是负的，则相反。

				注意控制位置的isTopNagtive不要设置成全局变量，要每人一个
			*/
			this.isTopNagtive = mask.offsetTop>0 ? -1:1;
			changeTo(mask,'top',0);
		};
		mBodyItems[i].onmouseout = function () {
			var mask = getElementsByClassName(this,'mask')[0];//需要的时候再获取mask，性能优化一点
			changeTo(mask,'top',this.isTopNagtive * this.offsetHeight);
		};
	}
};

function getStyle(elem,attr) {
	if (elem.currentStyle) {
		return elem.currentStyle[attr];
	}else{
		return getComputedStyle(elem,false)[attr];
	}
}

function getElementsByClassName(from,cName) {
	var result = new Array();
	var all = from.getElementsByTagName('*');
	for (var i = 0; i < all.length; i++) {
		if(all[i].className == cName){
			result.push(all[i]);
		}
	}
	return result;
}

function changeTo(obj,attr,target,fn) {
	clearInterval(obj.timer);//先将以前的定时器关闭，否则每调用一次这个函数就会增加一个定时器，元素的动画效果变化越来越快
	var nowValue = 0 ;
	var speed = 0 ;
	obj.timer = setInterval(function(){
		//处理不透明度的方法中要四舍五入，便于后面使用
		nowValue = (attr == 'opacity')?Math.round(parseFloat(getStyle(obj,'opacity'))*100):parseInt(getStyle(obj,attr));
		speed = (target>nowValue)?Math.ceil((target-nowValue)/7):Math.floor((target-nowValue)/7);//speed值为负时注意向下取整
		nowValue+=speed;
		if (attr == 'opacity') {//
			obj.style.filter = 'alpha(opacity:'+ nowValue +')';
			obj.style.opacity = nowValue/100;//非ie设置透明度方法
		}else{
			obj.style[attr] = nowValue + 'px';//变量做参数用方括号括起来，点号“.”调用不生效
		}
		if (nowValue == target) {//判断是否到目标值，若到了关闭定时器
			clearInterval(obj.timer);
			if (fn) {fn();}
		}		
	},30);
}
</script>
</body>
</html>